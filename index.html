<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title></title>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const timestamp = new Date().getTime();
            const link = document.createElement('link');
            link.rel = 'stylesheet';
            link.href = `styles.css?v=${timestamp}`;
            document.head.appendChild(link);
        });
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <style>
        #sections, #story, #settings {
            display: none;
        }
    </style>
    <script src="scripts/startup.js"></script>
</head>
<body>
    <div class="container" id="menu">
        <h1 id="mainTitle"></h1>
        <h2 id="subTitle"></h2>
        <button class="button" id="newGameButton" onclick="newGame()"></button>
        <button class="button" id="continueGameButton" onclick="continueGame()"></button>
        <button class="button" id="exportSaveButton" onclick="exportSave()"></button>
        <button class="button" id="importSaveButton" onclick="document.getElementById('fileInput').click()"></button>
        <button class="button" id="settingsButton" onclick="showSettings()"></button>
        <input id="fileInput" type="file" style="display: none;" onchange="importSave(event)">
    </div>
    
    <div class="container" id="sections"></div>

    <div class="container" id="story">
        <div class="text-container" id="storyContent"></div>
        <div class="controls">
            <input type="text" id="userInput" placeholder="你要怎么做？" />
            <button class="button" id="submitInputButton" onclick="submitUserInput()">开始</button>
        </div>
        <div id="loading" class="loading" style="display: none;">万物运行...</div>
    </div>

    <div class="container" id="settings" style="display: none;">
        <h2>设置</h2>
        <label for="api-key">API Key</label>
        <input type="password" id="api-key" placeholder="输入你的API Key">
        <label for="api-url">API URL</label>
        <input type="text" id="api-url" placeholder="输入你的API URL" value="https://openkey.cloud/v1/">
        <!-- 新增模型选择 -->
        <label for="model-select">选择模型</label>
        <select id="model-select">
            <option value="gpt-3.5-turbo">gpt-3.5-turbo</option>
            <option value="gpt-4o">gpt-4o</option>
        </select>
        
        <button class="button" id="saveButton" onclick="saveSettings()">保存设置</button>
        <button class="button" id="freeTrialButton" onclick="getFreeTrialKey()">免费试玩key</button>
        <button class="button" id="exitButton" onclick="hideSettings()">退出</button>
        <p id="trialStatus"></p>
        <p id="downloadStatus"></p>
    </div>
</body>
</html>